name: Telegram Pull Request Notification

on:
  workflow_call:
    inputs:
      chat_id:
        description: "Target Telegram chat ID (user, group, or channel)"
        required: true
        type: string
    secrets:
      bot_token:
        description: "Telegram bot token created via BotFather"
        required: true

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Telegram notification
        uses: jobmetric/github-notify/telegram@main
        with:
          bot_token: ${{ secrets.bot_token }}
          chat_id: ${{ inputs.chat_id }}
          message: |
            üîî **Pull Request ${{ github.event.action }}**

            **${{ github.event.pull_request.title }}**

            Repository: `${{ github.repository }}`
            Author: `${{ github.event.pull_request.user.login }}`
            Branch: `${{ github.event.pull_request.head.ref }}` ‚Üí `${{ github.event.pull_request.base.ref }}`
            ${{ github.event.pull_request.draft && 'Status: ‚è≥ Draft' || 'Status: ‚úÖ Ready for Review' }}

            [View Pull Request](${{ github.event.pull_request.html_url }})
          parse_mode: 'Markdown'
